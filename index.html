<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.ico">
  <meta name="author" content="Camila Peretto">
  <meta name="theme-color" content="#dceefb">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <title>PomoClock</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>

  <div id="app">
    <h1>PomoClock</h1>

    <!--Navegação-->
     <div class="menu">
      <button @click="modo = 'digital'">Digital</button>
      <button @click="modo = 'analogico'">Analógico</button>
      <button @click="modo = 'cronometro'">Cronômetro</button>
    </div>
    </div>

    <!--Digital-->
     <div v-if="modo === 'digital'" class="clock-digital">{{ horaFormatada }}</div>

    <!--Analógico-->
     <div v-if="modo === 'analogico'" class="clock-analogico">
      <div class="hand hour" :style="{ transform: `rotate(${grausHora}deg)` }"></div>
      <div class="hand minute" :style="{ transform: `rotate(${grausMinuto}deg)` }"></div>
      <div class="hand second" :style="{ transform: `rotate(${grausSegundo}deg)` }"></div>
      <div v-for="numeroHora in 12" :key="'numeroHora-' + numeroHora" class="clock-number" :style="posicaoNumero(numeroHora)"> {{ numeroHora }} </div>
      <div class="center-dot"></div>
    </div>

     <!-- Cronômetro -->
    <div v-if="modo === 'cronometro'">
      <div class="cronometro">{{ tempoFormatado }}</div>
      <div class="cronometro-botoes">
        <button @click="iniciar" :disabled="rodando">Iniciar</button>
        <button @click="pausar" :disabled="!rodando">Pausar</button>
        <button @click="resetar" :disabled="tempo === 0 && !rodando">Resetar</button>
      </div>
    </div>

  </div>

  <script>
    const { createApp, ref, computed, onMounted } = Vue;

    createApp({
      setup() {
        const modo = ref('digital');
        const hora = ref(new Date());
        const grausHora = ref(0);
        const grausMinuto = ref(0);
        const grausSegundo = ref(0);

        // Relógio digital formatado
        const horaFormatada = computed(() =>
          hora.value.toLocaleTimeString('pt-BR', {
            hour12: false,
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
          })
        );

        // Atualiza relógio digital e analógico
        function atualizarHora() {
          hora.value = new Date();
          const horas = hora.value.getHours();
          const minutos = hora.value.getMinutes();
          const segundos = hora.value.getSeconds();

          grausSegundo.value = segundos * 6;
          grausMinuto.value = minutos * 6 + segundos * 0.1;
          grausHora.value = (horas % 12) * 30 + minutos * 0.5;
        }

        function posicaoNumero(numero) {
          const angulo = (numero - 3) * 30;
          const radiano = angulo * (Math.PI / 180);
          const centro = 150; 
          const raio = 120;  
          const posicaox = centro + raio * Math.cos(radiano);
          const posicaoy = centro + raio * Math.sin(radiano);
            return {
              top: `${posicaoy}px`,
              left: `${posicaox}px`
            };
        }

        // Cronômetro
        const tempo = ref(0);
        const rodando = ref(false);
        const tempoFormatado = computed(() => {
          const min = String(Math.floor(tempo.value / 60)).padStart(2, '0');
          const seg = String(tempo.value % 60).padStart(2, '0');
          return `${min}:${seg}`;
        });

        let intervalo = null;

        const iniciar = () => {
          if (!rodando.value) {
            rodando.value = true;
            intervalo = setInterval(() => {
              tempo.value++;
            }, 1000);
          }
        };

        const pausar = () => {
          rodando.value = false;
          clearInterval(intervalo);
          intervalo = null;
        };

        const resetar = () => {
          pausar();
          tempo.value = 0;
        };

        onMounted(() => {
          atualizarHora();
          setInterval(atualizarHora, 1000);
        });

        return {
          modo,
          horaFormatada,
          grausHora,
          grausMinuto,
          grausSegundo,
          posicaoNumero,
          tempo,
          rodando,
          tempoFormatado,
          iniciar,
          pausar,
          resetar
        };
      }
    }).mount('#app');
  </script>

</body>
</html>
